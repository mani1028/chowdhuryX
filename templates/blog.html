{% extends "base.html" %}

{% block title %}Blog - ChowdhuryX{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/blog.css') }}">
{% endblock %}

{% block content %}
<section class="page-header blog-hero">
    <div class="container">
        <div class="blog-hero-content">
            <span class="blog-hero-eyebrow">Insights</span>
            <h1>Our Blog</h1>
            <p>Insights, trends, and industry updates curated by ChowdhuryX experts.</p>
        </div>
    </div>
</section>

<section class="blog-listing section-white">
    <div class="container">
        {% if blogs.items %}
        <div class="blog-grid">
            {% for blog in blogs.items %}
            <article class="blog-card">
                <a href="{{ url_for('blog_post', slug=blog.slug) }}" class="blog-image-link" aria-label="Read {{ blog.title }}">
                    <div class="blog-image">
                        {% if blog.featured_image %}
                        <img src="{{ url_for('static', filename='uploads/' + blog.featured_image) }}" alt="{{ blog.title }}">
                        {% else %}
                        <img src="https://via.placeholder.com/640x420" alt="{{ blog.title }}">
                        {% endif %}
                    </div>
                </a>
                <div class="blog-content">
                    <span class="blog-category">{{ blog.category }}</span>
                    <h3 class="blog-title"><a href="{{ url_for('blog_post', slug=blog.slug) }}">{{ blog.title }}</a></h3>
                    <p class="blog-excerpt">{{ blog.excerpt or blog.content[:200] }}...</p>
                    <div class="blog-meta">
                        <span class="meta-item"><i class="fas fa-user"></i> {{ blog.author }}</span>
                        <span class="meta-item"><i class="fas fa-calendar"></i> {{ blog.published_at | datetime_format }}</span>
                        <span class="meta-item"><i class="fas fa-eye"></i> {{ blog.views }} views</span>
                    </div>
                    <a href="{{ url_for('blog_post', slug=blog.slug) }}" class="read-more">Read Article <i class="fas fa-arrow-right"></i></a>
                </div>
            </article>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if blogs.pages > 1 %}
        <div class="pagination blog-pagination">
            {% if blogs.has_prev %}
            <a href="{{ url_for('blog', page=blogs.prev_num) }}" class="btn btn-outline">← Previous</a>
            {% endif %}

            {% for page_num in blogs.iter_pages() %}
                {% if page_num %}
                    {% if page_num == blogs.page %}
                    <span class="current-page">{{ page_num }}</span>
                    {% else %}
                    <a href="{{ url_for('blog', page=page_num) }}" class="btn btn-outline">{{ page_num }}</a>
                    {% endif %}
                {% else %}
                <span class="page-ellipsis">...</span>
                {% endif %}
            {% endfor %}

            {% if blogs.has_next %}
            <a href="{{ url_for('blog', page=blogs.next_num) }}" class="btn btn-outline">Next →</a>
            {% endif %}
        </div>
        {% endif %}
        {% else %}
        <div class="no-content blog-empty">
            <div class="empty-icon"><i class="fas fa-book-open"></i></div>
            <h3>No blog posts yet</h3>
            <p>Check back soon for new insights and updates.</p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
