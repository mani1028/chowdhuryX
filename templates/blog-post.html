{% extends "base.html" %}

{% block title %}{{ blog.title }} - ChowdhuryX Blog{% endblock %}

{% block content %}
<section class="blog-post-header">
    <div class="container">
        <article class="blog-post">
            <header class="post-header">
                <span class="category">{{ blog.category }}</span>
                <h1>{{ blog.title }}</h1>
                <div class="post-meta">
                    <span class="author"><i class="fas fa-user"></i> {{ blog.author }}</span>
                    <span class="date"><i class="fas fa-calendar"></i> {{ blog.published_at | datetime_format }}</span>
                    <span class="views"><i class="fas fa-eye"></i> {{ blog.views }} views</span>
                </div>
            </header>

            {% if blog.featured_image %}
            <img src="{{ url_for('static', filename='uploads/' + blog.featured_image) }}" alt="{{ blog.title }}" class="featured-image">
            {% else %}
            <img src="https://via.placeholder.com/900x400" alt="{{ blog.title }}" class="featured-image">
            {% endif %}

            <div class="post-body">
                {{ blog.content }}
            </div>

            <footer class="post-footer">
                <div class="post-tags">
                    <span class="tag">{{ blog.category }}</span>
                </div>
            </footer>
        </article>

        <!-- Related Posts -->
        {% if related_blogs %}
        <section class="related-posts">
            <h3>Related Articles</h3>
            <div class="related-grid">
                {% for related in related_blogs %}
                <article class="related-card">
                    {% if related.featured_image %}
                    <img src="{{ url_for('static', filename='uploads/' + related.featured_image) }}" alt="{{ related.title }}">
                    {% else %}
                    <img src="https://via.placeholder.com/300x200" alt="{{ related.title }}">
                    {% endif %}
                    <h4><a href="{{ url_for('blog_post', slug=related.slug) }}">{{ related.title }}</a></h4>
                    <p>{{ related.excerpt or related.content[:100] }}...</p>
                    <a href="{{ url_for('blog_post', slug=related.slug) }}" class="read-more">Read More â†’</a>
                </article>
                {% endfor %}
            </div>
        </section>
        {% endif %}
    </div>
</section>
{% endblock %}
