{% extends "base.html" %}

{% block title %}Careers at ChowdhuryX | Global Opportunities{% endblock %}

{% block description %}Explore careers at ChowdhuryX across technology, recruitment, BPO, and operations with global exposure and growth opportunities.{% endblock %}

{% block keywords %}IT jobs offshore, recruitment jobs India, BPO careers, software developer jobs, AI engineer jobs, global IT careers{% endblock %}

{% block og_title %}Careers at ChowdhuryX | Global Opportunities{% endblock %}

<!-- PLACEHOLDER -->
{% block title_ph %}Careers - ChowdhuryX{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/careers.css') }}">
<style>
/* Modern Careers Page Header */
.page-header {
    background: linear-gradient(135deg, var(--brand-primary) 0%, var(--brand-primary-dark) 100%);
    color: white;
    padding: 6rem 2rem 4rem;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.page-header::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    border-radius: 50%;
}

.page-header h1 {
    color: white;
    font-size: 3rem;
    margin-bottom: 1rem;
    font-weight: 700;
    letter-spacing: -1px;
    position: relative;
    z-index: 1;
}

.page-header p {
    color: rgba(255, 255, 255, 0.95);
    font-size: 1.3rem;
    max-width: 700px;
    margin: 0 auto;
    line-height: 1.6;
    position: relative;
    z-index: 1;
}
</style>
{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <h1>Join Our Team</h1>
        <p>Be part of a team that's transforming businesses worldwide</p>
    </div>
</section>

<!-- Open Positions -->
<section class="open-positions section-white">
    <div class="container">
        <h2>Open Positions</h2>
        
        <!-- Filters Section -->
        <div class="filters-section">
            <div class="filters-container">
                <div class="filter-group">
                    <label><i class="fas fa-briefcase"></i> Job Type</label>
                    <select id="jobTypeFilter" onchange="applyFilters()">
                        <option value="">All Types</option>
                        {% for type in job_types %}
                        <option value="{{ type }}" {% if current_filters.type == type %}selected{% endif %}>{{ type }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="filter-group">
                    <label><i class="fas fa-building"></i> Department</label>
                    <select id="departmentFilter" onchange="applyFilters()">
                        <option value="">All Departments</option>
                        {% for dept in departments %}
                        <option value="{{ dept }}" {% if current_filters.department == dept %}selected{% endif %}>{{ dept }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="filter-group">
                    <label><i class="fas fa-map-marker-alt"></i> Location</label>
                    <select id="locationFilter" onchange="applyFilters()">
                        <option value="">All Locations</option>
                        {% for loc in locations %}
                        <option value="{{ loc }}" {% if current_filters.location == loc %}selected{% endif %}>{{ loc }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="filter-group">
                    <label><i class="fas fa-list"></i> Per Page</label>
                    <select id="perPageFilter" onchange="applyFilters()">
                        <option value="10" {% if request.args.get('per_page', '10') == '10' %}selected{% endif %}>10</option>
                        <option value="25" {% if request.args.get('per_page') == '25' %}selected{% endif %}>25</option>
                        <option value="50" {% if request.args.get('per_page') == '50' %}selected{% endif %}>50</option>
                    </select>
                </div>
                
                <button class="btn-reset-filters" onclick="resetFilters()">
                    <i class="fas fa-redo"></i> Reset Filters
                </button>
            </div>
        </div>

        <!-- Jobs List -->
        {% if jobs %}
        <div class="jobs-list">
            {% for job in jobs %}
            <div class="job-card">
                <div class="job-header">
                    <h3><a href="{{ url_for('job_detail', job_id=job.id) }}" style="color: inherit; text-decoration: none;">{{ job.title }}</a></h3>
                    <span class="location"><i class="fas fa-map-marker-alt"></i> {{ job.location }}</span>
                </div>
                <p class="job-description">{{ job.description[:200] }}...</p>
                <div class="job-details">
                    <span class="experience"><i class="fas fa-briefcase"></i> {{ job.experience_required }}</span>
                    <span class="type"><i class="fas fa-clock"></i> {{ job.job_type }}</span>
                    {% if job.department %}
                    <span class="department"><i class="fas fa-building"></i> {{ job.department }}</span>
                    {% endif %}
                </div>
                <div style="display: flex; gap: 10px;">
                    <a href="{{ url_for('job_detail', job_id=job.id) }}" class="btn btn-secondary" style="flex: 1; text-decoration: none; text-align: center;">View Details</a>
                    <button class="btn btn-primary apply-btn" data-position="{{ job.title }}" style="flex: 1;">Apply Now</button>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if pagination.pages > 1 %}
        <div class="pagination">
            {% if pagination.has_prev %}
            <a href="{{ url_for('careers', page=pagination.prev_num, per_page=request.args.get('per_page', 10), type=current_filters.type, department=current_filters.department, location=current_filters.location) }}" class="page-link">
                <i class="fas fa-chevron-left"></i> Previous
            </a>
            {% endif %}
            
            <div class="page-numbers">
                {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
                    {% if page_num %}
                        <a href="{{ url_for('careers', page=page_num, per_page=request.args.get('per_page', 10), type=current_filters.type, department=current_filters.department, location=current_filters.location) }}" 
                           class="page-num {% if page_num == pagination.page %}active{% endif %}">
                            {{ page_num }}
                        </a>
                    {% else %}
                        <span class="page-ellipsis">...</span>
                    {% endif %}
                {% endfor %}
            </div>
            
            {% if pagination.has_next %}
            <a href="{{ url_for('careers', page=pagination.next_num, per_page=request.args.get('per_page', 10), type=current_filters.type, department=current_filters.department, location=current_filters.location) }}" class="page-link">
                Next <i class="fas fa-chevron-right"></i>
            </a>
            {% endif %}
        </div>
        <div class="pagination-info">
            Showing {{ (pagination.page - 1) * pagination.per_page + 1 }} - {{ min(pagination.page * pagination.per_page, pagination.total) }} of {{ pagination.total }} jobs
        </div>
        {% endif %}
        
        {% else %}
        <div class="no-jobs">
            <i class="fas fa-briefcase"></i>
            <p>No open positions match your filters at the moment.</p>
            <button class="btn btn-primary" onclick="resetFilters()">Reset Filters</button>
        </div>
        {% endif %}
    </div>
</section>

<script>
function applyFilters() {
    const type = document.getElementById('jobTypeFilter').value;
    const department = document.getElementById('departmentFilter').value;
    const location = document.getElementById('locationFilter').value;
    const perPage = document.getElementById('perPageFilter').value;
    
    const params = new URLSearchParams();
    if (type) params.append('type', type);
    if (department) params.append('department', department);
    if (location) params.append('location', location);
    if (perPage) params.append('per_page', perPage);
    
    window.location.href = '{{ url_for("careers") }}?' + params.toString();
}

function resetFilters() {
    window.location.href = '{{ url_for("careers") }}';
}
</script>

<!-- Why Join Us -->
<section class="why-join section-light">
    <div class="container">
        <h2>Why Join ChowdhuryX?</h2>
        <div class="benefits-grid">
            <div class="benefit">
                <i class="fas fa-dollar-sign"></i>
                <h4>Competitive Compensation</h4>
                <p>Market-leading salaries and comprehensive benefits packages</p>
            </div>
            <div class="benefit">
                <i class="fas fa-graduation-cap"></i>
                <h4>Professional Development</h4>
                <p>Continuous learning opportunities and career growth</p>
            </div>
            <div class="benefit">
                <i class="fas fa-home"></i>
                <h4>Work-Life Balance</h4>
                <p>Flexible work arrangements and generous time off</p>
            </div>
            <div class="benefit">
                <i class="fas fa-briefcase"></i>
                <h4>Meaningful Work</h4>
                <p>Make an impact on real-world problems and industries</p>
            </div>
            <div class="benefit">
                <i class="fas fa-users"></i>
                <h4>Diverse Team</h4>
                <p>Collaborate with talented professionals from around the world</p>
            </div>
            <div class="benefit">
                <i class="fas fa-rocket"></i>
                <h4>Innovation</h4>
                <p>Work with cutting-edge technologies and methodologies</p>
            </div>
        </div>
    </div>
</section>

<!-- Application Modal -->
<div id="applicationModal" class="modal">
    <div class="modal-content">
        <button class="modal-close" aria-label="Close">&times;</button>
        <div class="modal-header">
            <div class="modal-icon">
                <i class="fas fa-briefcase"></i>
            </div>
            <h2>Apply for Position</h2>
            <p id="modalPositionName" class="position-name"></p>
        </div>
        <form id="applicationForm" class="application-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" id="positionInput" name="position" value="">
            
            <div class="form-row">
                <div class="form-group">
                    <label for="fullName">
                        <i class="fas fa-user"></i> Full Name
                        <span class="required">*</span>
                    </label>
                    <input type="text" id="fullName" name="full_name" placeholder="John Doe" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="email">
                        <i class="fas fa-envelope"></i> Email Address
                        <span class="required">*</span>
                    </label>
                    <input type="email" id="email" name="email" placeholder="john.doe@example.com" required>
                </div>
                <div class="form-group">
                    <label for="phone">
                        <i class="fas fa-phone"></i> Phone Number
                        <span class="required">*</span>
                    </label>
                    <input type="tel" id="phone" name="phone" placeholder="+1 (555) 123-4567" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="experience">
                        <i class="fas fa-chart-line"></i> Years of Experience
                        <span class="required">*</span>
                    </label>
                    <input type="number" id="experience" name="experience_years" min="0" placeholder="5" required>
                </div>
                <div class="form-group">
                    <label for="resume">
                        <i class="fas fa-file-upload"></i> Resume/CV
                        <span class="required">*</span>
                    </label>
                    <div class="file-input-wrapper">
                        <input type="file" id="resume" name="resume" accept=".pdf,.doc,.docx" required>
                        <span class="file-label">Choose file...</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="coverLetter">
                    <i class="fas fa-pen"></i> Cover Letter
                    <span class="optional">(Optional)</span>
                </label>
                <textarea id="coverLetter" name="cover_letter" rows="5" placeholder="Tell us why you're a great fit for this position..."></textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-submit">
                    <i class="fas fa-paper-plane"></i> Submit Application
                </button>
                <button type="button" class="btn btn-cancel" onclick="document.getElementById('applicationModal').classList.remove('show')">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block js %}
<script src="{{ url_for('static', filename='js/careers.js') }}"></script>
{% endblock %}
